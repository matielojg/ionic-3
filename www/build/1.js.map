{"version":3,"sources":["../../src/pages/order-confirmation/order-confirmation.module.ts","../../src/services/domain/pedido.service.ts","../../src/pages/order-confirmation/order-confirmation.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PedidoService } from '../../services/domain/pedido.service';\nimport { OrderConfirmationPage } from './order-confirmation';\n\n@NgModule({\n  declarations: [\n    OrderConfirmationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderConfirmationPage),\n  ],\n  providers: [\n    PedidoService\n  ]\n})\nexport class OrderConfirmationPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirmation/order-confirmation.module.ts","import { Injectable } from \"@angular/core\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { API_CONFIG } from \"../../config/api.config\";\nimport { PedidoDTO } from \"../../models/pedido.dto\";\n\n@Injectable()\nexport class PedidoService {\n\n    constructor(public http: HttpClient) {\n    }\n\n    insert(obj: PedidoDTO) {\n        return this.http.post(\n            `${API_CONFIG.baseUrl}/pedidos`,\n            obj,\n            {\n                observe: 'response',\n                responseType: 'text'\n            }\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/domain/pedido.service.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { CartItem } from '../../models/cart-item';\nimport { ClienteDTO } from '../../models/cliente.dto';\nimport { EnderecoDTO } from '../../models/endereco.dto';\nimport { PedidoDTO } from '../../models/pedido.dto';\nimport { CartService } from '../../services/domain/cart-service';\nimport { ClienteService } from '../../services/domain/cliente.service';\nimport { PedidoService } from '../../services/domain/pedido.service';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-order-confirmation',\n  templateUrl: 'order-confirmation.html',\n})\nexport class OrderConfirmationPage {\n  pedido: PedidoDTO;\n  cartItems: CartItem[];\n  cliente: ClienteDTO;\n  endereco: EnderecoDTO;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public clienteService: ClienteService,\n    public cartService: CartService,\n    public pedidoService: PedidoService) {\n\n    this.pedido = this.navParams.get('pedido');\n  }\n\n  ionViewDidLoad() {\n    this.cartItems = this.cartService.getCart().items;\n\n    this.clienteService.findById(this.pedido.cliente.id)\n      .subscribe(response => {\n        this.cliente = response as ClienteDTO;\n        this.endereco = this.findEndereco(this.pedido.enderecoDeEntrega.id, response['enderecos']);\n      },\n        error => {\n          this.navCtrl.setRoot('HomePage');\n        });\n  }\n\n  private findEndereco(id: string, list: EnderecoDTO[]): EnderecoDTO {\n    let position = list.findIndex(x => x.id == id);\n    return list[position];\n  }\n\n  total(): number {\n    return this.cartService.total();\n  }\n  back() {\n    this.navCtrl.setRoot('CartPage');\n  }\n\n  checkout() {\n    this.pedidoService.insert(this.pedido)\n      .subscribe(response => {\n        this.cartService.createOrClearCart();\n        console.log(response.headers.get('location'));\n      },\n        error => {\n          if (error.status == 403) {\n            this.navCtrl.setRoot('HomePage');\n          }\n        });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirmation/order-confirmation.ts"],"sourceRoot":""}